# 架构映射战略设计方案

（基于领域驱动设计统一过程）
版本：V1.0

### 1 系统上下文

结合全局分析阶段获得的价值需求（利益相关者、系统愿景、系统范围）确定系统上下文，体现用户、目标系统与外部相关系统之间的关系。

#### 1.1 概述

给出系统上下文图，明确解释空间的系统边界。

#### 1.2 系统协作

业务流程1..n
根据全局分析阶段获得的业务流程，为每个业务流程绘制业务序列图，并以文字简要说明彼此之间的协作关系。

---

### 2 业务架构

结合业务愿景与业务范围，描绘出核心子领域、支撑子领域与通用子领域之间的关系。

#### 2.1 业务组件

结合全局分析阶段获得的业务服务，根据V型映射过程从业务相关性识别限界上下文，并将其作为组成业务架构的业务组件。通过业务服务图展现业务场景与业务组件之间的包含关系。为每个业务组件中涉及的业务服务编制服务列表，展现前端、业务组件（限界上下文）与伴生系统之间的调用关系。

#### 2.2 业务架构视图

确定业务组件与子领域之间的关系，从业务角度绘制整个目标系统的业务架构。

---

### 3 应用架构

#### 3.1 应用组件

在限界上下文的指导与约束下，将业务架构的业务组件转为应用架构的应用组件。应用组件的粒度对应于限界上下文，但需要从团队维护和技术难度进一步梳理理清上下文的边界，同时根据属主属性的要求确定进边界。应用组件以库或服务的形式呈现，除共享内核外，应用组件的内部架构均遵循逐对称架构的要求。

#### 3.2 应用架构视图

在业务架构视图的指导下，通过系统分层架构体现应用架构视图。其中，系统分层架构的业务价值层与基础层由有限界上下文确定的应用组件组成。

---

### 4 子领域架构

根据各个不同的子领域，设计各自的架构。

#### 4.1 核心子领域1..n

1. 概述

- 描述核心子领域提供的业务能力，并以列表方式给出每个应用组件的说明，为其绘制上下文映射图，映射该子领域内各应用组件的协作关系。

* 应用组件1...n

- 描述应用组件的基本信息，包括组件名、组件描述与组件类型。
- 全局分析阶段输出的业务服务对应于解空间的服务契约，而服务契约又属于应用组件。为当前应用组件编写服务契约定义。包括服务功能、服务功能描述、服务方法、生产者、消费者、模式、业务服务与服务操作类型，以表D-1的形式给出。

  表D-1 服务契约列表

  | 服务功能 | 服务功能描述 | 服务方法 | 生产者 | 消费者 | 模式   | 业务服务 | 服务操作类型 |
  | -------- | ------------ | -------- | ------ | ------ | ------ | -------- | ------------ |
  |          |              |          | ××× | ××× | ××× | ×××   | ×××       |

2. 服务契约1..n

- 详细描述每一个服务契约定义，内容包括服务功能、服务功能描述、服务方法、生产者、消费者、模式、业务服务与服务操作类型，并给出与服务质量相关的要求，包括高等性、安全性、同步或异步及其他设计要求，如性能、兼容性、环境等。

#### 4.2 支撑子领域

同4.1核心子领域。

#### 4.3 通用子领域

同D.6.1核心子领域。
